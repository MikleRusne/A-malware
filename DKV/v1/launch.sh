#!/bin/bash
set -e

trap 'killall v1' SIGINT

cd $(dirname $0)

killall v1 || true
sleep 0.1

go install -v

# v1 -db-location=AatirKhan.db        -http-addr=127.0.0.2:8080 -config-file=sharding.toml -shard=AatirKhan                               &
# v1 -db-location=AatirKhan-r.db      -http-addr=127.0.0.22:8080 -config-file=sharding.toml -shard=AatirKhan -replica                     &
# v1 -db-location=AbdulSamad.db       -http-addr=127.0.0.3:8080 -config-file=sharding.toml -shard=AbdulSamad                              &
# v1 -db-location=AbdulSamad-r.db     -http-addr=127.0.0.33:8080 -config-file=sharding.toml -shard=AbdulSamad -replica                    &
# v1 -db-location=AliFarhat.db        -http-addr=127.0.0.4:8080 -config-file=sharding.toml -shard=AliFarhat                               &
# v1 -db-location=AliFarhat-r.db      -http-addr=127.0.0.44:8080 -config-file=sharding.toml -shard=AliFarhat -replica &
# v1 -db-location=AmalSaqib.db        -http-addr=127.0.0.5:8080 -config-file=sharding.toml -shard=AmalSaqib &
# v1 -db-location=AmalSaqib-r.db      -http-addr=127.0.0.55:8080 -config-file=sharding.toml -shard=AmalSaqib -replica &
# v1 -db-location=AtoofaAkhtar.db     -http-addr=127.0.0.6:8080 -config-file=sharding.toml -shard=AtoofaAkhtar &
# v1 -db-location=AtoofaAkhtar-r.db   -http-addr=127.0.0.66:8080 -config-file=sharding.toml -shard=AtoofaAkhtar -replica & 
# v1 -db-location=ArshanullahTawhidi.db       -http-addr=127.0.0.7:8080 -config-file=sharding.toml -shard=ArshanullahTawhidi &
# v1 -db-location=ArshanullahTawhidi-r.db     -http-addr=127.0.0.77:8080 -config-file=sharding.toml -shard=ArshanullahTawhidi -replica &
# v1 -db-location=AsadImtiaz.db               -http-addr=127.0.0.8:8080 -config-file=sharding.toml -shard=AsadImtiaz &
# v1 -db-location=AsadImtiaz-r.db             -http-addr=127.0.0.88:8080 -config-file=sharding.toml -shard=AsadImtiaz -replica &
# v1 -db-location=AzazelOfTheCourtOfBlight.db     -http-addr=127.0.0.9:8080 -config-file=sharding.toml -shard=AzraelOfTheCourtOfBlight &
# v1 -db-location=AzazelOfTheCourtOfBlight-r.db   -http-addr=127.0.0.99:8080 -config-file=sharding.toml -shard=AzraelOfTheCourtOfBlight -replica


v1 -db-location=/dev/shm/AatirKhan.db        -http-addr=127.0.0.2:8080 -config-file=sharding.toml -shard=AatirKhan                               &
v1 -db-location=/dev/shm/AatirKhan-r.db      -http-addr=127.0.0.22:8080 -config-file=sharding.toml -shard=AatirKhan -replica                     &
v1 -db-location=/dev/shm/AbdulSamad.db       -http-addr=127.0.0.3:8080 -config-file=sharding.toml -shard=AbdulSamad                              &
v1 -db-location=/dev/shm/AbdulSamad-r.db     -http-addr=127.0.0.33:8080 -config-file=sharding.toml -shard=AbdulSamad -replica                    &
v1 -db-location=/dev/shm/AliFarhat.db        -http-addr=127.0.0.4:8080 -config-file=sharding.toml -shard=AliFarhat                               &
v1 -db-location=/dev/shm/AliFarhat-r.db      -http-addr=127.0.0.44:8080 -config-file=sharding.toml -shard=AliFarhat -replica &
v1 -db-location=/dev/shm/AmalSaqib.db        -http-addr=127.0.0.5:8080 -config-file=sharding.toml -shard=AmalSaqib &
v1 -db-location=/dev/shm/AmalSaqib-r.db      -http-addr=127.0.0.55:8080 -config-file=sharding.toml -shard=AmalSaqib -replica &
v1 -db-location=/dev/shm/AtoofaAkhtar.db     -http-addr=127.0.0.6:8080 -config-file=sharding.toml -shard=AtoofaAkhtar &
v1 -db-location=/dev/shm/AtoofaAkhtar-r.db   -http-addr=127.0.0.66:8080 -config-file=sharding.toml -shard=AtoofaAkhtar -replica & 
v1 -db-location=/dev/shm/ArshanullahTawhidi.db       -http-addr=127.0.0.7:8080 -config-file=sharding.toml -shard=ArshanullahTawhidi &
v1 -db-location=/dev/shm/ArshanullahTawhidi-r.db     -http-addr=127.0.0.77:8080 -config-file=sharding.toml -shard=ArshanullahTawhidi -replica &
v1 -db-location=/dev/shm/AsadImtiaz.db               -http-addr=127.0.0.8:8080 -config-file=sharding.toml -shard=AsadImtiaz &
v1 -db-location=/dev/shm/AsadImtiaz-r.db             -http-addr=127.0.0.88:8080 -config-file=sharding.toml -shard=AsadImtiaz -replica &
v1 -db-location=/dev/shm/AzazelOfTheCourtOfBlight.db     -http-addr=127.0.0.9:8080 -config-file=sharding.toml -shard=AzraelOfTheCourtOfBlight &
v1 -db-location=/dev/shm/AzazelOfTheCourtOfBlight-r.db   -http-addr=127.0.0.99:8080 -config-file=sharding.toml -shard=AzraelOfTheCourtOfBlight -replica

wait
